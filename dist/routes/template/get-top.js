'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.getTopTemplatesRoute = undefined;

var _express = require('express');

var _templateInfo = require('./../../sample_data/template-info.js');

var getTopTemplatesRoute = (0, _express.Router)();

getTopTemplatesRoute.get('/template/get/top', function (req, res) {
    // get templates in order of popularity from db
    // sort templates
    if (_templateInfo.templates) res.send(_templateInfo.templates.sort(function (a, b) {
        return b.upvotes - a.upvotes;
    }));else res.status(500).json({ message: "Database error - unable to retrieve top templates" });
});

exports.getTopTemplatesRoute = getTopTemplatesRoute;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9yb3V0ZXMvdGVtcGxhdGUvZ2V0LXRvcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBR0E7O0FBRkEsSUFBTSx1QkFBdUIsc0JBQTdCOztBQUlBLHFCQUFxQixHQUFyQixDQUF5QixtQkFBekIsRUFBOEMsVUFBQyxHQUFELEVBQU0sR0FBTixFQUFjOzs7QUFHcEQsaUNBQ0ksSUFBSSxJQUFKLENBQVMsd0JBQWEsSUFBYixDQUFrQixVQUFDLENBQUQsRUFBSSxDQUFKLEVBQVU7QUFDcEMsZUFBTyxFQUFFLE9BQUYsR0FBWSxFQUFFLE9BQXJCO0FBQ0EsS0FGUSxDQUFULEVBREosS0FLSSxJQUFJLE1BQUosQ0FBVyxHQUFYLEVBQWdCLElBQWhCLENBQXFCLEVBQUMsU0FBUyxtREFBVixFQUFyQjtBQUNYLENBVEQ7O1FBV1Esb0IsR0FBQSxvQiIsImZpbGUiOiJnZXQtdG9wLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtSb3V0ZXJ9IGZyb20gJ2V4cHJlc3MnO1xyXG5jb25zdCBnZXRUb3BUZW1wbGF0ZXNSb3V0ZSA9IFJvdXRlcigpO1xyXG5cclxuaW1wb3J0IHt0ZW1wbGF0ZXMgYXMgdG9wVGVtcGxhdGVzfSBmcm9tICcuLy4uLy4uL3NhbXBsZV9kYXRhL3RlbXBsYXRlLWluZm8uanMnO1xyXG5cclxuZ2V0VG9wVGVtcGxhdGVzUm91dGUuZ2V0KCcvdGVtcGxhdGUvZ2V0L3RvcCcsIChyZXEsIHJlcykgPT4ge1xyXG4gICAgLy8gZ2V0IHRlbXBsYXRlcyBpbiBvcmRlciBvZiBwb3B1bGFyaXR5IGZyb20gZGJcclxuICAgICAgICAvLyBzb3J0IHRlbXBsYXRlc1xyXG4gICAgICAgIGlmKHRvcFRlbXBsYXRlcylcclxuICAgICAgICAgICAgcmVzLnNlbmQodG9wVGVtcGxhdGVzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgXHRyZXR1cm4gYi51cHZvdGVzIC0gYS51cHZvdGVzO1xyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7bWVzc2FnZTogXCJEYXRhYmFzZSBlcnJvciAtIHVuYWJsZSB0byByZXRyaWV2ZSB0b3AgdGVtcGxhdGVzXCJ9KTtcclxufSk7XHJcblxyXG5leHBvcnQge2dldFRvcFRlbXBsYXRlc1JvdXRlfTsiXX0=